<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ticket Assignment Notification</title>
  </head>

  <body style="font-family: Arial, sans-serif; background-color: #f4f6f9; padding: 20px; margin: 0;">

    <div style="background-color: #ffffff; width: 100%; max-width: 600px; margin: 0 auto; padding: 40px 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">

      <!-- Brand Header -->
      <div style="background-color: #123692; color: #ffffff; padding: 30px; border-radius: 10px 10px 0 0; margin: -40px -30px 30px -30px; text-align: center;">
        <img src="cid:logo" alt="Logo" style="width:70px;height:70px;border-radius:50%;border:2px solid #ffffff;margin-bottom:10px;">
        <h1 style="font-size: 24px; font-weight: bold; margin: 0 0 5px 0;">
          üéüÔ∏è Ticket {{ ticket.id|stringformat:"03d" }} Assigned
        </h1>
        <p style="font-size: 14px; opacity: 0.9; margin: 0; color: #ffffff;">
          Assignment Confirmation
        </p>
      </div>

      <!-- Intro -->
      <p style="font-size: 16px; color: #555; line-height: 1.6; margin-bottom: 10px;">
        Hello,
      </p>

      <p style="font-size: 16px; color: #555; line-height: 1.6; margin-bottom: 20px;">
        <strong>Thank you for reaching out!</strong> Your ticket
        <strong>#{{ ticket.id }}</strong> ‚Äì
        <em>{{ ticket.title }}</em>
        has been successfully assigned.
      </p>

      <!-- Assignment Notice -->
      <div style="background-color: #e8f4fd; border-left: 4px solid #123692; color: #1a3a6b; padding: 20px; border-radius: 6px; margin: 25px 0;">
        <p style="margin: 0; font-size: 16px; line-height: 1.6;">
          Your issue is being handled by
          <strong style="color:#123692;">
            {{ ticket.assigned_to.get_full_name|default:ticket.assigned_to.username }}
          </strong>.
          You may contact them directly via phone:
          <strong>{{ ticket.assigned_to.profile.phone_number }}</strong>
        </p>
      </div>

      <!-- Ticket Details Box -->
      <div style="background-color: #f8f9fa; border-left: 4px solid #123692; padding: 20px; border-radius: 6px; margin: 25px 0;">
        <h3 style="color: #123692; font-size: 18px; margin: 0 0 15px 0; font-weight: 600;">
          Ticket Details
        </h3>

        <ul style="list-style: none; padding: 0; margin: 0;">

          <!-- Status -->
          <li style="font-size: 16px; color: #343a40; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #e9ecef;">
            <strong style="color:#123692; display:inline-block; min-width:140px;">Status:</strong>
            {% with code=ticket.status|lower %}
              {% if code == 'open' %}
                <span style="background:#28a745;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_status_display }}</span>
              {% elif code == 'in_progress' %}
                <span style="background:#ffc107;color:#212529;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_status_display }}</span>
              {% elif code == 'resolved' %}
                <span style="background:#17a2b8;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_status_display }}</span>
              {% elif code == 'closed' %}
                <span style="background:#6c757d;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_status_display }}</span>
              {% else %}
                <span style="background:#6b7280;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_status_display }}</span>
              {% endif %}
            {% endwith %}
          </li>

          <!-- Priority -->
          <li style="font-size: 16px; color: #343a40; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #e9ecef;">
            <strong style="color:#123692; display:inline-block; min-width:140px;">Priority:</strong>
            {% with p=ticket.priority|lower %}
              {% if p == 'low' %}
                <span style="background:#17a2b8;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_priority_display }}</span>
              {% elif p == 'medium' %}
                <span style="background:#ffc107;color:#212529;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_priority_display }}</span>
              {% elif p == 'high' %}
                <span style="background:#fd7e14;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_priority_display }}</span>
              {% elif p == 'critical' %}
                <span style="background:#dc3545;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_priority_display }}</span>
              {% else %}
                <span style="background:#6b7280;color:#fff;padding:4px 10px;border-radius:6px;font-size:13px;font-weight:600;">{{ ticket.get_priority_display }}</span>
              {% endif %}
            {% endwith %}
          </li>

          <!-- Created Info -->
          <li style="font-size: 16px; color: #343a40; margin-bottom: 0; padding: 8px 0;">
            <strong style="color:#123692; display:inline-block; min-width:140px;">Created By:</strong>
            {{ ticket.created_by.get_full_name|default:ticket.created_by.username }}<br>
            <strong style="color:#123692; display:inline-block; min-width:140px;">Created At:</strong>
            {{ ticket.created_at|date:"Y-m-d H:i" }}
          </li>

        </ul>
      </div>

      <!-- CTA -->
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 25px 0;">
        <tr>
          <td align="center">
            <a href="{{ ticket_url }}" style="display:inline-block;background-color:#123692;color:#ffffff!important;padding:14px 35px;border-radius:6px;text-decoration:none;font-weight:600;font-size:16px;">
              View Ticket
            </a>
          </td>
        </tr>
      </table>

      <!-- Footer -->
      <div style="text-align:center;font-size:14px;color:#6c757d;margin-top:40px;padding-top:20px;border-top:1px solid #e9ecef;">
        <p style="margin:0 0 10px 0;">&copy; 2026 Blue River Technology Solutions. All rights reserved.</p>
        <p style="margin:5px 0 0 0;">
          <a href="mailto:support@blueriverafrica.net" style="color:#123692;text-decoration:none;">Contact Support</a>
        </p>
      </div>

    </div>
  </body>
</html>
