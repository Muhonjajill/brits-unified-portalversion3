{% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<link rel="stylesheet" type="text/css" href="{% static 'css/files_navbar.css' %}">

<div class="top-navbar">
  <!--<button class="hamburger" id="hamburger"><i class="fas fa-bars"></i></button>-->


  <div class="hamburger" id="hamburger">
    <i class="fa-solid fa-bars"></i>
  </div>

  <div class="logo">Blue River Technology Solutions</div>

  <div class="search-bar">
    <i class="fas fa-search"></i>
    <input type="text"  id="navbarSearchInput" placeholder="Search for files, categories, or users...">
  </div>

  <div class="user-profile" id="userProfile">
    <div class="profile-dropdown">
      {% if user.profile.avatar %}
        <img src="{{ user.profile.avatar.url }}" alt="User Avatar">
      {% else %}
        <div class="avatar-initials">
          {% with user.get_full_name|default:user.username as full_name %}
            {% if full_name %}
              {% with first_initial=full_name|slice:":1" last_initial=full_name|slice:" " %}
                <span>{{ first_initial|upper }}{{ last_initial|slice:":1"|upper }}</span>
              {% endwith %}
            {% else %}
              <span>{{ user.username|slice:":1"|upper }}</span>
            {% endif %}
          {% endwith %}
        </div>
      {% endif %}
      <span>{{ user.get_full_name|default:user.username }}</span>
      <i class="fas fa-chevron-down"></i>
    </div>
    <div class="dropdown-content">
      <a href="{% url 'profile_view' %}"><i class="fa-solid fa-user"></i>  Profile</a>
      <a href="{% url 'settings' %}"><i class="fa-solid fa-gear"></i>  Settings</a>
      <form id="logout-form" method="post" action="{% url 'logout' %}" style="margin: 0;">
        {% csrf_token %}
        <button type="submit" class="dropdown-link logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Logout</button>
      </form>
    </div>
  </div>
</div>

<script>
  const profileViewUrl = "{% url 'profile_view' %}";
</script>

<script src="{% static 'js/files_navbar.js' %}"></script>
